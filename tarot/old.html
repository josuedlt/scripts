<head>
    <link rel="stylesheet" href="https://unpkg.com/bulma">
    <link href="https://jenil.github.io/bulmaswatch/darkly/bulmaswatch.min.css" rel="stylesheet">
    <script src="https://unpkg.com/axios/dist/axios.js"></script>
    <script src="https://unpkg.com/lodash"></script>
    <script src="https://unpkg.com/vue"></script>
    <style>
        .reversed {
            transform: rotate(180deg)
        }
    </style>
</head>
<body>
    <div class="section" id="app">
        <div class="" v-for="(card, i) in hand" :key="i">
            <div class="columns">
                <figure class="column is-narrow-tablet">
                    <img :src="card.imgSrc" :class='{ reversed: card.reversed }'>
                </figure>
                <div class="column">
                    <p class="title is-3" v-html="card.name"></p>
                    <p v-html="card.meaning"></p>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    var app = new Vue({
        el: '#app',
        data: {
            deck: [],
            hand: []
        },
        created() {
            axios.get('cards/riderwaite.json').then(({ data }) => {
                var deck = this.deck = new Array(data.cards.length);
                data.cards.forEach((c, i) => {
                    deck[i] = {
                        idx: i,
                        name: c,
                        meaning: data[c],
                        imgSrc: `decks/smith-waite/${i}.jpg`,
                        reversed: Math.random() > 0.5
                    }
                });

                this.getHand()
                setInterval(this.getHand, 15000)
            })
        },
        methods: {
            getHand(count) {
                this.hand = _(this.deck).shuffle().take(count).value()
            }
        }
    })
</script>